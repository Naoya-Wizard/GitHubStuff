# jqコマンドの詳細解説

このドキュメントでは、`jq '[.[] | select(.state == "APPROVED")] | length'`というコマンドについて詳しく説明します。このコマンドは、jqというJSON処理ツールを使用して、特定の条件に一致する要素の数をカウントするためのものです。

## コマンドの解説

### `[.[]`

- `[]`はJSON配列を示します。
- `.[]`は入力されたJSON配列の各要素に対して操作を適用することを意味します。

### `| select(.state == "APPROVED")`

- `|`はパイプ演算子で、左側の結果を右側の処理に渡します。
- `select()`は条件に一致する要素を選択するための関数です。
- `.state == "APPROVED"`は、`state`フィールドが`"APPROVED"`である要素を選択する条件です。

### `| length`

- ここでの`|`もパイプ演算子です。
- `length`は、選択された要素の数（配列の長さ）を返します。

## 使用例

以下のようなJSONデータがある場合：

```json
[
  {"state": "APPROVED"},
  {"state": "CHANGES_REQUESTED"},
  {"state": "APPROVED"}
]
```

このコマンドは`state`が`"APPROVED"`の要素が2つあるため、`2`という結果を返します。このコマンドはGitHub Actionsのスクリプト内で使用され、プルリクエストに対する「承認」の数をカウントするのに役立ちます。
