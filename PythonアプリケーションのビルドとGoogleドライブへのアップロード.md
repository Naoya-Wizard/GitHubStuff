
# PythonアプリケーションのビルドとGoogleドライブへのアップロード - GitHub Actionsワークフロー

このGitHub Actionsワークフローは、PythonアプリケーションをPyInstallerを使用してビルドし、生成された実行可能ファイルをGoogleドライブにアップロードするプロセスを自動化するために設計されています。このワークフローは、メインブランチへのプッシュおよびプルリクエストイベントでトリガーされます。

## ワークフローの詳細

1. **トリガー**
   - メインブランチへのプッシュおよびプルリクエスト： 'main' ブランチへのプッシュまたはプルリクエストがあるとアクティブになります。

2. **ジョブ**
   - ジョブ：ビルドとアップロード
   - 実行環境： Windows最新バージョン。

3. **ステップ**
   - リポジトリのチェックアウト
     - actions/checkout@v2 を使用してリポジトリをチェックアウトします。
     - リポジトリの完全な履歴を取得します。
   - Pythonファイルの変更チェック
     - PowerShellを使用して、upload_to_drive.py を除くPythonファイルに変更があるかどうかを確認します。
     - 関連するファイルに変更がない場合、ジョブは早期に終了します。
   - Pythonのセットアップ
     - actions/setup-python@v2 を使用してPython 3.11.1をセットアップします。
   - 依存関係のインストール
     - pipをアップグレードし、requirements.txt から依存関係をインストールします。
   - PyInstallerのインストール
     - Pythonファイルを実行可能ファイルにコンパイルするためのPyInstallerをインストールします。
   - PyInstallerでビルド
     - 変更されたPythonファイルを単一ファイルの実行可能ファイルにコンパイルします。
   - 生成されたEXEファイルのリストアップ
     - distディレクトリ内のEXEファイルをリストアップします。
   - Googleクライアントライブラリのインストール
     - Google Drive APIとのやりとりに必要なライブラリをインストールします。
   - コンパイルされたEXEの検索
     - コンパイルされたEXEファイルのパスを見つけます。
   - サービスアカウントJSONファイルの作成
     - GitHubシークレットからGoogleサービスアカウントのJSONファイルを作成します。
   - GoogleドライブへのEXEファイルのアップロード
     - 指定されたGoogleドライブフォルダにEXEファイルをアップロードするためにupload_to_drive.pyを実行します。
   - EXEファイル名の収集
     - 通知用にEXEファイルの名前を収集します。
   - Slackへのメッセージ送信
     - アップロードされたファイルのリンクを含むアップデート情報をSlackチャネルに通知します。
